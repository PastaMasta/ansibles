#
# Generated by ansible, changes will be lost
#
# Updated on {{ template_run_date }}
#

[global]
workgroup =  NEWWORKGROUP
netbiosname = {{ ansible_hostname }}
server string = {{ ansible_hostname }}

# Logging
log level = 1 auth:5 winbind:5pid
log file = /var/log/samba/%m.log
max log size = 1000

security = user
map to guest = Bad User
guest account = nobody

# No printers
load printers = no
printing = bsd
printcap name = /dev/null
show add printer wizard = no
disable spoolss = yes

# Performance
getwd cache = true
write cache size = 2097152
min receivefile size = 16384
getwd cache = true

# Main data repo
[repo]
comment = nas repo
path = /data/repo

locking = yes

guest ok = yes
public = yes
writeable = no
read only = yes

write list = @repo

# Tuning bits
store dos attributes = no
case sensitive = auto
ea support = no

map archive = no
map hidden = no
map system = no
map readonly = no

# Backup hosts
[backups]
comment = smb backups for local hosts
path = /data/backup/local
locking = yes
guest ok = no
public = no
writeable = no
write list = @backups
{% if backup_hosts is defined %}
hosts allow = {{ backup_hosts | join(' ') }}
{% endif %}
